
This is a set of scripts to store[1], distribute[2] and manage[3] mail.

[1] Mail is stored on the server encrypted with gpg by the included MDA script gpgmda (tested on postfix).
[2] Mail is distributed to any number of clients (mail readers) via ssh/rsync.
[3] Mail is read, tagged, and replied to with alot. Standard end-to-end public key encryption and decryption are supported.


The scripts wrap the required components:

	xapian: http://xapian.org

	notmuchmail: http://notmuchmail.org

	alot: https://github.com/pazz/alot

	gnupg: http://gnupg.org

	getmail: http://pyropus.ca/software/getmail

	ssh: http://openssh.org

	rsync: http://rsync.samba.org

	tar: http://www.gnu.org/software/tar

	parallel: http://www.gnu.org/software/parallel

	coreutils: http://www.gnu.org/software/coreutils


Overview of files in repo:

gpgmda
	encrypting local message delivery agent (MDA). The only server side script here.
	incoming mail -> postfix -> gpg(email_plaintext) -> Maildir on postfix server

gpgmda.README
	documentation for gpgmda

mail_update
	download new mail, decrypt, add to notmuch, and read with alot

mail_send
	called by alot to send message via ssh through the mailserver hosting gpgmda. Note this determines the user that postfix uses to send mail.

getmail_gmail
	download gmail account (needs fixing)

gpgmda_to_maildir
	convert gpgMaildir to Maildir (individual messages or all messages) by calling gpgmda_decrypt_msg
	
gpgmda_decrypt_msg
	decrypt message encrypted by gpgmda

make_alot_theme
	generate alot theme configuration file (edit this to customize the alot theme)

make_alot_config
	generate alot configuration file (edit this to customize alot)

README	
	this file

nottoomuch-addresses.sh
	script for managing the notmuch address book and address autocomplete in alot

generate_gpgmda_example_configs
	create example config files under ~/.gpgmda (run this and then read the examples in ~/.gpgmda/)

Getting Started:

1. Install the dependencies.

2. Read gpgmda.README and setup gpgmda on your mailserver.

3. execute generate_gpgmda_example_configs locally, edit and rename the example files.

4. run "mail_update --update --read user@domain.net" to rsync, decrypt, index and read your mail.

5. run "mail_update --read user@domain.net" to just read your mail.

6. add aliases in ~/.bashrc for steps 5 and 6.

7. fix bugs, send pull requests.

